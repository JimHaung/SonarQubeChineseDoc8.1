{"expireTime":9007200835559383000,"key":"transformer-remark-markdown-ast-925038352e9f2bc85df3db6080b5b9aa-gatsby-remark-custom-blocks-/SonarQubeChineseDoc8.1","val":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"Upgrading across multiple, non-LTS versions is handled automatically. However, if you have an LTS version in your migration path, you must first migrate to this LTS and then migrate to your target version.","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":206,"offset":206},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":206,"offset":206},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Example 1 : 5.1 -> 7.0, migration path is 5.1 -> 5.6.7 LTS -> 6.7.x LTS -> 7.0\nExample 2 : 6.2 -> 6.7, migration path is 6.2 -> 6.7.x LTS (where x is the latest patch available for 6.7 - you don't need to install all the intermediary patches, just take the latest)","position":{"start":{"line":4,"column":1,"offset":208},"end":{"line":5,"column":186,"offset":472},"indent":[1]}}],"position":{"start":{"line":4,"column":1,"offset":208},"end":{"line":5,"column":186,"offset":472},"indent":[1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Upgrade Guide","position":{"start":{"line":7,"column":4,"offset":477},"end":{"line":7,"column":17,"offset":490},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":474},"end":{"line":7,"column":17,"offset":490},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This is a generic upgrade guide. Carefully read the ","position":{"start":{"line":9,"column":1,"offset":492},"end":{"line":9,"column":53,"offset":544},"indent":[]}},{"type":"link","title":null,"url":"/SonarQubeChineseDoc8.1/setup/upgrade-notes/","children":[{"type":"text","value":"Release Upgrade Notes","position":{"start":{"line":9,"column":54,"offset":545},"end":{"line":9,"column":75,"offset":566},"indent":[]}}],"position":{"start":{"line":9,"column":53,"offset":544},"end":{"line":9,"column":99,"offset":590},"indent":[]}},{"type":"text","value":" of your target version and of any intermediate version(s).","position":{"start":{"line":9,"column":99,"offset":590},"end":{"line":9,"column":158,"offset":649},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":492},"end":{"line":9,"column":158,"offset":649},"indent":[]}},{"type":"infoCustomBlock","children":[{"type":"infoCustomBlockBody","data":{"hName":"div","hProperties":{"className":"custom-block-body"}},"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Planning to Upgrade to a Commercial Edition?","position":{"start":{"line":11,"column":3,"offset":653},"end":{"line":11,"column":47,"offset":697},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":651},"end":{"line":11,"column":49,"offset":699},"indent":[]}},{"type":"break","position":{"start":{"line":11,"column":49,"offset":699},"end":{"line":12,"column":1,"offset":660},"indent":[1]}},{"type":"text","value":"If you are moving to 6.7 LTS and installing a Commercial Edition, please read this ","position":{"start":{"line":12,"column":1,"offset":660},"end":{"line":12,"column":84,"offset":743},"indent":[]}},{"type":"link","title":null,"url":"https://docs.sonarqube.org/display/SONARQUBE67/SonarSource+Editions","children":[{"type":"text","value":"documentation","position":{"start":{"line":12,"column":85,"offset":744},"end":{"line":12,"column":98,"offset":757},"indent":[]}}],"position":{"start":{"line":12,"column":84,"offset":743},"end":{"line":12,"column":168,"offset":827},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":12,"column":168,"offset":827},"end":{"line":12,"column":169,"offset":828},"indent":[]}}],"position":{"start":{"line":11,"column":1,"offset":651},"end":{"line":12,"column":169,"offset":828},"indent":[1]}}]}],"data":{"hName":"div","hProperties":{"className":["custom-block","alert","alert-info"]}},"position":{"start":{"line":11,"column":1,"offset":651},"end":{"line":13,"column":171,"offset":883},"indent":[1,1]}},{"type":"warningCustomBlock","children":[{"type":"warningCustomBlockBody","data":{"hName":"div","hProperties":{"className":"custom-block-body"}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Before you start, back up your SonarQube Database. Upgrade problems are rare, but you'll want the backup if anything does happen.","position":{"start":{"line":15,"column":1,"offset":885},"end":{"line":15,"column":130,"offset":1014},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":885},"end":{"line":15,"column":130,"offset":1014},"indent":[]}}]}],"data":{"hName":"div","hProperties":{"className":["custom-block","alert","alert-warning"]}},"position":{"start":{"line":15,"column":1,"offset":885},"end":{"line":16,"column":132,"offset":1028},"indent":[1]}},{"type":"list","ordered":true,"start":1,"loose":false,"children":[{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Download and unzip the SonarQube distribution of your edition in a fresh directory, let's say ","position":{"start":{"line":18,"column":4,"offset":1033},"end":{"line":18,"column":98,"offset":1127},"indent":[]}},{"type":"inlineCode","value":"$NEW_SONARQUBE_HOME","position":{"start":{"line":18,"column":98,"offset":1127},"end":{"line":18,"column":119,"offset":1148},"indent":[]}}],"position":{"start":{"line":18,"column":4,"offset":1033},"end":{"line":18,"column":119,"offset":1148},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":1030},"end":{"line":18,"column":119,"offset":1148},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Manually install the non-default plugins that are compatible with your version of SonarQube. Use the ","position":{"start":{"line":19,"column":4,"offset":1152},"end":{"line":19,"column":105,"offset":1253},"indent":[]}},{"type":"link","title":null,"url":"https://docs.sonarqube.org/display/PLUG/Plugin+Version+Matrix","children":[{"type":"text","value":"Compatibility Matrix","position":{"start":{"line":19,"column":106,"offset":1254},"end":{"line":19,"column":126,"offset":1274},"indent":[]}}],"position":{"start":{"line":19,"column":105,"offset":1253},"end":{"line":19,"column":190,"offset":1338},"indent":[]}},{"type":"text","value":" to ensure that the versions you install are compatible with your server version. Note that the most recent versions of all SonarSource code analyzers available in your edition are installed by default. Simply copying plugins from the old server to the new is not recommended; incompatible or duplicate plugins could cause startup errors.","position":{"start":{"line":19,"column":190,"offset":1338},"end":{"line":19,"column":528,"offset":1676},"indent":[]}}],"position":{"start":{"line":19,"column":4,"offset":1152},"end":{"line":19,"column":528,"offset":1676},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":1149},"end":{"line":19,"column":528,"offset":1676},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Update the contents of ","position":{"start":{"line":20,"column":4,"offset":1680},"end":{"line":20,"column":27,"offset":1703},"indent":[]}},{"type":"inlineCode","value":"sonar.properties","position":{"start":{"line":20,"column":27,"offset":1703},"end":{"line":20,"column":45,"offset":1721},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":20,"column":45,"offset":1721},"end":{"line":20,"column":50,"offset":1726},"indent":[]}},{"type":"inlineCode","value":"wrapper.conf","position":{"start":{"line":20,"column":50,"offset":1726},"end":{"line":20,"column":64,"offset":1740},"indent":[]}},{"type":"text","value":" files (in ","position":{"start":{"line":20,"column":64,"offset":1740},"end":{"line":20,"column":75,"offset":1751},"indent":[]}},{"type":"inlineCode","value":"$NEW_SONARQUBE_HOME/conf","position":{"start":{"line":20,"column":75,"offset":1751},"end":{"line":20,"column":101,"offset":1777},"indent":[]}},{"type":"text","value":") with the settings of the related files in the ","position":{"start":{"line":20,"column":101,"offset":1777},"end":{"line":20,"column":149,"offset":1825},"indent":[]}},{"type":"inlineCode","value":"$OLD_SONARQUBE_HOME/conf","position":{"start":{"line":20,"column":149,"offset":1825},"end":{"line":20,"column":175,"offset":1851},"indent":[]}},{"type":"text","value":" directory (web server URL, database, ldap settings, etc.). Do not copy-paste the old files.\nIf you are using the Oracle DB, copy its JDBC driver into ","position":{"start":{"line":20,"column":175,"offset":1851},"end":{"line":21,"column":59,"offset":2002},"indent":[1]}},{"type":"inlineCode","value":"$NEW_SONARQUBE_HOME/extensions/jdbc-driver/oracle","position":{"start":{"line":21,"column":59,"offset":2002},"end":{"line":21,"column":110,"offset":2053},"indent":[]}}],"position":{"start":{"line":20,"column":4,"offset":1680},"end":{"line":21,"column":110,"offset":2053},"indent":[1]}}],"position":{"start":{"line":20,"column":1,"offset":1677},"end":{"line":21,"column":110,"offset":2053},"indent":[1]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Stop your old SonarQube Server","position":{"start":{"line":22,"column":4,"offset":2057},"end":{"line":22,"column":34,"offset":2087},"indent":[]}}],"position":{"start":{"line":22,"column":4,"offset":2057},"end":{"line":22,"column":34,"offset":2087},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":2054},"end":{"line":22,"column":34,"offset":2087},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Start your new SonarQube Server","position":{"start":{"line":23,"column":4,"offset":2091},"end":{"line":23,"column":35,"offset":2122},"indent":[]}}],"position":{"start":{"line":23,"column":4,"offset":2091},"end":{"line":23,"column":35,"offset":2122},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":2088},"end":{"line":23,"column":35,"offset":2122},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Browse to ","position":{"start":{"line":24,"column":4,"offset":2126},"end":{"line":24,"column":14,"offset":2136},"indent":[]}},{"type":"inlineCode","value":"http://yourSonarQubeServerURL/setup","position":{"start":{"line":24,"column":14,"offset":2136},"end":{"line":24,"column":51,"offset":2173},"indent":[]}},{"type":"text","value":" and follow the setup instructions","position":{"start":{"line":24,"column":51,"offset":2173},"end":{"line":24,"column":85,"offset":2207},"indent":[]}}],"position":{"start":{"line":24,"column":4,"offset":2126},"end":{"line":24,"column":85,"offset":2207},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":2123},"end":{"line":24,"column":85,"offset":2207},"indent":[]}},{"type":"listItem","loose":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Reanalyze your projects to get fresh data","position":{"start":{"line":25,"column":4,"offset":2211},"end":{"line":25,"column":45,"offset":2252},"indent":[]}}],"position":{"start":{"line":25,"column":4,"offset":2211},"end":{"line":25,"column":45,"offset":2252},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":2208},"end":{"line":25,"column":45,"offset":2252},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":1030},"end":{"line":25,"column":45,"offset":2252},"indent":[1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Additional Information","position":{"start":{"line":27,"column":4,"offset":2257},"end":{"line":27,"column":26,"offset":2279},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":2254},"end":{"line":27,"column":26,"offset":2279},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Oracle Clean-up","position":{"start":{"line":29,"column":5,"offset":2285},"end":{"line":29,"column":20,"offset":2300},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":2281},"end":{"line":29,"column":20,"offset":2300},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Starting with version 6.6, there's an additional step you may want to perform if you're using Oracle. On Oracle, the database columns to be dropped are now marked as UNUSED and are not physically dropped anymore. To reclaim disk space, Oracle administrators must drop these unused columns manually. The SQL request is ","position":{"start":{"line":31,"column":1,"offset":2302},"end":{"line":31,"column":319,"offset":2620},"indent":[]}},{"type":"inlineCode","value":"ALTER TABLE foo DROP UNUSED COLUMNS","position":{"start":{"line":31,"column":319,"offset":2620},"end":{"line":31,"column":356,"offset":2657},"indent":[]}},{"type":"text","value":". The relevant tables are listed in the system table ","position":{"start":{"line":31,"column":356,"offset":2657},"end":{"line":31,"column":409,"offset":2710},"indent":[]}},{"type":"inlineCode","value":"all_unused_col_tabs","position":{"start":{"line":31,"column":409,"offset":2710},"end":{"line":31,"column":430,"offset":2731},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":31,"column":430,"offset":2731},"end":{"line":31,"column":431,"offset":2732},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":2302},"end":{"line":31,"column":431,"offset":2732},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Additional Database Maintenance","position":{"start":{"line":33,"column":5,"offset":2738},"end":{"line":33,"column":36,"offset":2769},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":2734},"end":{"line":33,"column":36,"offset":2769},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Refreshing your database's statistics and rebuilding your database's indices are recommended once the technical upgrade is done (just before the very last step).","position":{"start":{"line":35,"column":1,"offset":2771},"end":{"line":35,"column":162,"offset":2932},"indent":[]}}],"position":{"start":{"line":35,"column":1,"offset":2771},"end":{"line":35,"column":162,"offset":2932},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For PostgreSQL, that means executing ","position":{"start":{"line":37,"column":1,"offset":2934},"end":{"line":37,"column":38,"offset":2971},"indent":[]}},{"type":"inlineCode","value":"VACUUM FULL","position":{"start":{"line":37,"column":38,"offset":2971},"end":{"line":37,"column":51,"offset":2984},"indent":[]}},{"type":"text","value":". According to the PostgreSQL documentation:","position":{"start":{"line":37,"column":51,"offset":2984},"end":{"line":37,"column":95,"offset":3028},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":2934},"end":{"line":37,"column":95,"offset":3028},"indent":[]}},{"type":"code","lang":null,"value":"In normal PostgreSQL operation, tuples that are deleted or obsoleted by an update are not physically removed from their table; they remain present until a VACUUM is done.","position":{"start":{"line":39,"column":1,"offset":3030},"end":{"line":41,"column":4,"offset":3208},"indent":[1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Scanner Update","position":{"start":{"line":43,"column":5,"offset":3214},"end":{"line":43,"column":19,"offset":3228},"indent":[]}}],"position":{"start":{"line":43,"column":1,"offset":3210},"end":{"line":43,"column":19,"offset":3228},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When upgrading SonarQube, you should also make sure you’re using the latest versions of the SonarQube scanners to take advantage of features and fixes on the scanner side. Please check the documentation pages of the Scanners you use for the most recent version compatible with SonarQube and your build tools.","position":{"start":{"line":45,"column":1,"offset":3230},"end":{"line":45,"column":309,"offset":3538},"indent":[]}}],"position":{"start":{"line":45,"column":1,"offset":3230},"end":{"line":45,"column":309,"offset":3538},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"SonarQube as a Linux or Windows Service","position":{"start":{"line":47,"column":5,"offset":3544},"end":{"line":47,"column":44,"offset":3583},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":3540},"end":{"line":47,"column":44,"offset":3583},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you use external configuration, such as a script or Windows Service to control your server, you'll need to update it to point to ","position":{"start":{"line":49,"column":1,"offset":3585},"end":{"line":49,"column":133,"offset":3717},"indent":[]}},{"type":"inlineCode","value":"$NEW_SONARQUBE_HOME","position":{"start":{"line":49,"column":133,"offset":3717},"end":{"line":49,"column":154,"offset":3738},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":49,"column":154,"offset":3738},"end":{"line":49,"column":155,"offset":3739},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":3585},"end":{"line":49,"column":155,"offset":3739},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In case you used the InstallNTService.bat to install SonarQube as a Windows Service, run the $OLD","position":{"start":{"line":51,"column":1,"offset":3741},"end":{"line":51,"column":98,"offset":3838},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"SONARQUBE","position":{"start":{"line":51,"column":99,"offset":3839},"end":{"line":51,"column":108,"offset":3848},"indent":[]}}],"position":{"start":{"line":51,"column":98,"offset":3838},"end":{"line":51,"column":109,"offset":3849},"indent":[]}},{"type":"text","value":"HOME/bin/.../UninstallNTService.bat before running the InstallNTService.bat of the $NEW","position":{"start":{"line":51,"column":109,"offset":3849},"end":{"line":51,"column":196,"offset":3936},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"SONARQUBE","position":{"start":{"line":51,"column":197,"offset":3937},"end":{"line":51,"column":206,"offset":3946},"indent":[]}}],"position":{"start":{"line":51,"column":196,"offset":3936},"end":{"line":51,"column":207,"offset":3947},"indent":[]}},{"type":"text","value":"HOME.","position":{"start":{"line":51,"column":207,"offset":3947},"end":{"line":51,"column":212,"offset":3952},"indent":[]}}],"position":{"start":{"line":51,"column":1,"offset":3741},"end":{"line":51,"column":212,"offset":3952},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Release Upgrade Notes","position":{"start":{"line":53,"column":4,"offset":3957},"end":{"line":53,"column":25,"offset":3978},"indent":[]}}],"position":{"start":{"line":53,"column":1,"offset":3954},"end":{"line":53,"column":25,"offset":3978},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Usually SonarQube releases come with some specific recommendations for upgrading from the previous version. You should read the upgrade notes for each version between your current version and the target version.","position":{"start":{"line":55,"column":1,"offset":3980},"end":{"line":55,"column":212,"offset":4191},"indent":[]}}],"position":{"start":{"line":55,"column":1,"offset":3980},"end":{"line":55,"column":212,"offset":4191},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":57,"column":1,"offset":4193}}}}